<link href="/css/address.css" rel="stylesheet">
<link href="/css/cart.css" rel="stylesheet">
<header>
    <div class="d-flex justify-content-center align-items-center pb-3">
        <div class="px-sm-5 px-2 active">SHOPPING CART <span class="fas fa-check"></span> </div>
        <div class="px-sm-5 px-2">CHECKOUT</div>
        <div class="px-sm-5 px-2">FINISH</div>
    </div>
    <div class="progress">
        <div class="progress-bar bg-success" role="progressbar" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100"></div>
    </div>
</header>
<div class="wrapper">

    <form id="checkout-form">
        <input name="userid" value="{{user}}" hidden></input>
        <div class="row">
            <div class="col-lg-9 col-md-8 bg-light col-sm-10 offset-lg-0 offset-md-2 offset-sm-1">
                <div class="row mt-5 ms-5">
                    <div class="col-lg-1 ">
                        <i style="font-size: 40px;" class="mt-1 fas fa-map-marker-alt"></i>
                    </div>
                    <div class="col-lg-11">
                        <h5>Delivery Address</h5>
                        <p>We willl deliver your order to this address</p>

                        {{#each add}}
                        <div class="form-check">
                            <input class="form-check-input" value="{{this.id}}" required type="radio" name="address"
                                id="flexRadioDefault1">
                            <label class="form-check-label" for="flexRadioDefault1">
                                {{this.name}} , {{this.address}}<br>{{this.city}},{{this.state}}<br>{{this.pin}}
                            </label>
                            <a onclick="return confirm('Are you sure you want to delete this item?');"
                                href="/delete-address/{{this.id}}">
                                <i class="ms-5 fas fa-trash-alt"></i>

                            </a>
                        </div>

                        {{/each}}
                        <a type="button" href="/add-address" class="btn-sm btn-primary mb-5 mt-5">Add</a>
                    </div>

                </div>

            </div>

            <div class="col-lg-3">
                <div
                    class="ibox                                                                                                                                                                                                                                                ">
                    <div class="ibox-title">
                        <h5>Cart Summary</h5>
                    </div>
                    <div class="ibox-content">
                        <span>
                            Total
                        </span>
                        <h2 class="font-bold">
                            RS : {{total_amount.total}}
                        </h2>

                        <hr>
                        <span class="text-muted small">
                            *For United States, France and Germany applicable sales tax will be applied
                        </span>
                        <div class="m-t-sm">
                            <div class="btn-group">


                            </div>
                        </div>
                    </div>
                </div>
                <hr>
            </div>
            <div class="container">
                <!-- For demo purpose -->
               
                <div class="row">
                    <div class="col-lg-6">
                        <div class="card ">
              
                    <div class="col-lg-8  text-center">
                        <h2 >Select payment method</h2  >
                    </div>
                            <div class="card-header">


                                <div class="tab-content">
                                    <!-- credit card info-->


                                <!-- Default radio -->
                                <div class="form-check">
                                    <input class="form-check-input" value="cod" type="radio" name="mod"
                                        id="flexRadioDefault1" />
                                    <label class="form-check-label" for="flexRadioDefault1"> Cash on delivery </label>
                                </div>

                                <!-- Default checked radio -->
                                <div class="form-check">
                                    <input class="form-check-input" value="razor" type="radio" name="flexRadioDefault"
                                        id="flexRadioDefault2"  />
                                    <label class="form-check-label" for="flexRadioDefault2"> Razor pay
                                    </label>
                                </div>

                                   <div class="form-check">
                                    <input class="form-check-input" value="paypal" type="radio" name="flexRadioDefault"
                                        id="flexRadioDefault2"  />
                                    <label class="form-check-label" for="flexRadioDefault2"> Pay pal
                                    </label>
                                </div>
                   

                                        <div class="card-footer"> <button type="submit"
                                                class="subscribe btn btn-primary btn-block shadow-sm"> Confirm Order
                                            </button>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>


    </form>
</div>







<script>
    $("#checkout-form").submit((e) => {
        e.preventDefault()
        $.ajax({
            url: "/place-order",
            data: $("#checkout-form").serialize(),
            method: "post",
            success: function (response) {
                console.log(response);
                if (response.status) {
                    alert("Order placed Successfully")
                    location.replace('/login');

                }
                else {
                    $('#inv').html("login")
                    alert("Something Error")

                }

            },
            error: function (err) {
                alert("Something Error")

            }
        })

    })
</script>